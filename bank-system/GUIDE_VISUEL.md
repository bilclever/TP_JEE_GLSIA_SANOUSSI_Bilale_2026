# ðŸŽ¯ GUIDE VISUEL - SystÃ¨me Bancaire EGA SÃ©curisÃ©

## ðŸ“Š Architecture globale

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLIENT APPLICATION                         â”‚
â”‚  (Frontend / Mobile / Postman)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ 1. POST /auth/login
                             â”‚    {username, password}
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         SPRING BOOT APPLICATION                â”‚
        â”‚         port: 8081                             â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  JwtAuthenticationFilter (Filtre JWT)          â”‚
        â”‚  âœ… Valide chaque requÃªte                      â”‚
        â”‚  âœ… Extrait les droits                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
                 â”‚                                       â”‚
                 â”‚ âœ… Token valide                       â”‚ âŒ Token invalide
                 â–¼                                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ @PreAuthorize    â”‚              â”‚ Response 401 / 403  â”‚
        â”‚ VÃ©rifier rÃ´les   â”‚              â”‚ AccÃ¨s refusÃ©        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ âœ… Droits OK              âŒ Pas de droits
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ExÃ©cuter l'actionâ”‚              â”‚ Response 403     â”‚
        â”‚ (dÃ©pÃ´t/retrait   â”‚              â”‚ Forbidden        â”‚
        â”‚  /virement, etc) â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Response 200 OK  â”‚
        â”‚ + donnÃ©es        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ JWT + DonnÃ©es    â”‚
        â”‚ au client        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ” Flux d'authentification dÃ©taillÃ©

```
Ã‰TAPE 1: LOGIN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Client                    API                      Base de donnÃ©es
  â”‚                        â”‚                                â”‚
  â”œâ”€â”€POST /loginâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                â”‚
  â”‚  {username, password}    â”‚                                â”‚
  â”‚                          â”‚â”€â”€lookup utilisateurâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                          â”‚<â”€â”€â”€rÃ©ponse userâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                          â”‚                                â”‚
  â”‚                          â”œâ”€ Valide password (BCrypt)      â”‚
  â”‚                          â”‚                                â”‚
  â”‚<â”€â”€â”€â”€â”€Response OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â”‚
  â”‚  + accessToken (24h)     â”‚                                â”‚
  â”‚  + refreshToken (7j)     â”‚                                â”‚
  â”‚  + role: AGENT/ADMIN     â”‚                                â”‚
  â”‚                          â”‚                                â”‚

Ã‰TAPE 2: REQUÃŠTE AVEC TOKEN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Client                    API                    JwtFilter
  â”‚                        â”‚                           â”‚
  â”œâ”€GET /comptesâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
  â”‚  + Bearer {token}        â”œâ”€â”€Valide le tokenâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                          â”‚<â”€â”€Roles extraitsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                          â”‚                           â”‚
  â”‚                          â”œâ”€@PreAuthorize check      â”‚
  â”‚                          â”‚                          â”‚
  â”‚<â”€â”€â”€â”€Response 200â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
  â”‚  + DonnÃ©es comptes       â”‚                          â”‚
  â”‚                          â”‚                          â”‚

Ã‰TAPE 3: LOGOUT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Client                    API
  â”‚                        â”‚
  â”œâ”€â”€POST /logoutâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚  + Bearer {token}        â”‚
  â”‚                          â”‚  âœ… Session fermÃ©e
  â”‚<â”€â”€â”€â”€Response 200â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  "DÃ©connexion rÃ©ussie"   â”‚
  â”‚                          â”‚
```

---

## ðŸ‘¥ Matrice de contrÃ´le d'accÃ¨s

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   MATRICE D'AUTORISATION                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ OPÃ‰RATION                     â•‘ AGENT           â•‘ ADMIN           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ POST /auth/login              â•‘ âœ… Oui          â•‘ âœ… Oui          â•‘
â•‘ POST /auth/logout             â•‘ âœ… Oui          â•‘ âœ… Oui          â•‘
â•‘ POST /auth/register           â•‘ âŒ Non          â•‘ âœ… Oui          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ GET /comptes                  â•‘ âœ… Oui          â•‘ âœ… Oui          â•‘
â•‘ GET /comptes/{id}             â•‘ âœ… Oui          â•‘ âœ… Oui          â•‘
â•‘ GET /comptes/{id}/solde       â•‘ âœ… Oui          â•‘ âœ… Oui          â•‘
â•‘ GET /comptes/{id}/transactionsâ•‘ âœ… Oui          â•‘ âœ… Oui          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ POST /comptes                 â•‘ âŒ Non          â•‘ âœ… Oui          â•‘
â•‘ PATCH /comptes/{id}/activate  â•‘ âŒ Non          â•‘ âœ… Oui          â•‘
â•‘ PATCH /comptes/{id}/deactivateâ•‘ âŒ Non          â•‘ âœ… Oui          â•‘
â•‘ DELETE /comptes/{id}          â•‘ âŒ Non          â•‘ âœ… Oui          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ POST /comptes/{id}/depot      â•‘ âœ… Oui          â•‘ âœ… Oui          â•‘
â•‘ POST /comptes/{id}/retrait    â•‘ âœ… Oui          â•‘ âœ… Oui          â•‘
â•‘ POST /comptes/virement        â•‘ âœ… Oui          â•‘ âœ… Oui          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ðŸš€ Cycle de vie d'une requÃªte

```
REQUEST CYCLE (DurÃ©e: ~100-200ms)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Client envoie requÃªte
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 1: Extraction du token (5-10ms)      â”‚
â”‚ âœ… RÃ©cupÃ¨re "Authorization: Bearer ..."    â”‚
â”‚ âœ… Extrait le token JWT                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 2: Validation du token (10-20ms)     â”‚
â”‚ âœ… VÃ©rifie la signature                    â”‚
â”‚ âœ… VÃ©rifie l'expiration                    â”‚
â”‚ âœ… Extrait les claims (username, rÃ´les)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       âœ… Valide?
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚
        â–¼ OUI         â–¼ NON
    Continue    Response 401
               Unauthorized
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 3: VÃ©rification des rÃ´les (5-10ms)   â”‚
â”‚ @PreAuthorize("hasRole('AGENT')")         â”‚
â”‚ âœ… VÃ©rifie que l'utilisateur a le rÃ´le    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        âœ… AutorisÃ©?
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚
        â–¼ OUI         â–¼ NON
    Continue    Response 403
               Forbidden
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 4: ExÃ©cution de l'action (20-150ms)  â”‚
â”‚ âœ… Appel du controller                     â”‚
â”‚ âœ… Logique mÃ©tier (appel DB, etc)         â”‚
â”‚ âœ… GÃ©nÃ©ration de la rÃ©ponse                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 5: Envoi de la rÃ©ponse (5-10ms)      â”‚
â”‚ âœ… Response 200 OK                         â”‚
â”‚ âœ… DonnÃ©es JSON                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
Client reÃ§oit la rÃ©ponse
```

---

## ðŸ”„ Ã‰tat des tokens JWT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TOKEN JWT              â”‚
â”‚                          â”‚
â”‚  Header:                 â”‚
â”‚  {                       â”‚
â”‚    "alg": "HS256"        â”‚
â”‚    "typ": "JWT"          â”‚
â”‚  }                       â”‚
â”‚                          â”‚
â”‚  Payload:                â”‚
â”‚  {                       â”‚
â”‚    "sub": "agent",       â”‚ â† username
â”‚    "role": "AGENT",      â”‚ â† rÃ´le utilisateur
â”‚    "iat": 1705497600,    â”‚ â† issuedAt
â”‚    "exp": 1705584000     â”‚ â† expiration (24h plus tard)
â”‚  }                       â”‚
â”‚                          â”‚
â”‚  Signature: [HASH]       â”‚ â† SignÃ©e avec clÃ© secrÃ¨te
â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DURÃ‰E DE VIE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

accessToken: 24 heures â°
    â”œâ”€ UtilisÃ© pour chaque requÃªte
    â””â”€ Expire automatiquement

refreshToken: 7 jours ðŸ“…
    â”œâ”€ UtilisÃ© pour renouveler accessToken
    â””â”€ Expire aprÃ¨s 7 jours
```

---

## ðŸŽ¯ Cas d'utilisation: Agent effectue dÃ©pÃ´t

```
1ï¸âƒ£ LOGIN
   POST /api/v1/auth/login
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   {
     "username": "agent",
     "password": "agent123"
   }
   
   âœ… Response 200:
   {
     "accessToken": "eyJhbGciOiJIUzI1NiJ9...",
     "refreshToken": "eyJhbGciOiJIUzI1NiJ9...",
     "username": "agent",
     "role": "AGENT"
   }

2ï¸âƒ£ EFFECTUER DÃ‰PÃ”T
   POST /api/v1/comptes/1234567890/depot?montant=500
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Header: Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...
   
   âœ… JwtAuthenticationFilter vÃ©rifie le token
   âœ… @PreAuthorize("hasAnyRole('AGENT', 'ADMIN')") âœ…
   âœ… Response 200:
   {
     "id": 1,
     "type": "DEPOT",
     "montant": 500,
     "dateTransaction": "2026-01-17T12:00:00",
     "nouveauSolde": 5500
   }

3ï¸âƒ£ LOGOUT
   POST /api/v1/auth/logout
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Header: Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...
   
   âœ… Response 200:
   "DÃ©connexion rÃ©ussie"
```

---

## âŒ Cas d'utilisation: Agent essaie crÃ©er compte

```
1ï¸âƒ£ LOGIN (identique)
   âœ… accessToken obtenu

2ï¸âƒ£ ESSAYER CRÃ‰ER COMPTE
   POST /api/v1/comptes
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Header: Authorization: Bearer {agentToken}
   Body: {"clientId": 1, "type": "COURANT"}
   
   âŒ JwtAuthenticationFilter vÃ©rifie le token âœ…
   âŒ @PreAuthorize("hasRole('ADMIN')") âŒ
   âŒ Agent n'a pas le rÃ´le ADMIN
   
   âŒ Response 403 Forbidden:
   {
     "error": "Access Denied",
     "message": "User does not have the required role"
   }

3ï¸âƒ£ L'operation est REJETÃ‰E âŒ
```

---

## ðŸ“± Utilisation avec Postman

```
Ã‰TAPE 1: Login
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Ouvrir Postman
2. CrÃ©er une nouvelle requÃªte POST
3. URL: http://localhost:8081/api/v1/auth/login
4. Body (JSON):
   {
     "username": "agent",
     "password": "agent123"
   }
5. Envoyer
6. Copier "accessToken" de la rÃ©ponse

Ã‰TAPE 2: Utiliser le token
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Nouvelle requÃªte POST
2. URL: http://localhost:8081/api/v1/comptes/123/depot?montant=500
3. Headers:
   - Key: Authorization
   - Value: Bearer {accessToken}
4. Envoyer
5. âœ… DÃ©pÃ´t effectuÃ©

Ã‰TAPE 3: Logout
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Nouvelle requÃªte POST
2. URL: http://localhost:8081/api/v1/auth/logout
3. Headers:
   - Key: Authorization
   - Value: Bearer {accessToken}
4. Envoyer
5. âœ… DÃ©connexion rÃ©ussie
```

---

## ðŸ”’ Diagramme de sÃ©curitÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COUCHES DE SÃ‰CURITÃ‰                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  COUCHE 1: AUTHENTIFICATION                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ JWT Tokens + BCrypt Passwords                    â”‚    â”‚
â”‚  â”‚ âœ… Valide identifiants                          â”‚    â”‚
â”‚  â”‚ âœ… VÃ©rifie expiration du token                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                â”‚
â”‚  COUCHE 2: AUTORISATION                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ @PreAuthorize avec rÃ´les (AGENT, ADMIN)         â”‚    â”‚
â”‚  â”‚ âœ… VÃ©rifie les permissions                      â”‚    â”‚
â”‚  â”‚ âœ… Retourne 403 si accÃ¨s refusÃ©                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                â”‚
â”‚  COUCHE 3: VALIDATION                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Validation des paramÃ¨tres                        â”‚    â”‚
â”‚  â”‚ âœ… VÃ©rifie les donnÃ©es entrantes                â”‚    â”‚
â”‚  â”‚ âœ… Retourne 400 si donnÃ©es invalides            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š Statistiques de sÃ©curitÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MÃ‰TRIQUES DE SÃ‰CURITÃ‰              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ Endpoints sÃ©curisÃ©s:  13/14 (93%)   â”‚
â”‚ Endpoints publics:     1/14  (7%)   â”‚
â”‚                                     â”‚
â”‚ Token expiration:     24 heures     â”‚
â”‚ Refresh expiration:    7 jours      â”‚
â”‚                                     â”‚
â”‚ Algorithme JWT:       HS256         â”‚
â”‚ Hachage password:     BCrypt        â”‚
â”‚                                     â”‚
â”‚ RÃ´les:                 2 (AGENT, ADMIN)
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Visuel crÃ©Ã© le**: 17 janvier 2026

